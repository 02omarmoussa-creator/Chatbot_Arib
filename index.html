<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ŸÖÿ≥ÿßÿπÿØ ÿßŸÑÿ™ÿØÿ±Ÿäÿ® ÿßŸÑÿ∞ŸÉŸä - ŸÖÿ≠ŸÉŸÖÿ© ÿßŸÑŸÖÿ≠ÿßÿ≥ÿ®ÿßÿ™</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .chatbot-toggler {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #1a472a 0%, #2ecc71 100%);
            border: none;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 5px 20px rgba(46, 204, 113, 0.4);
            transition: all 0.3s ease;
            z-index: 9999;
        }

        .chatbot-toggler:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 25px rgba(46, 204, 113, 0.6);
        }

        .chatbot-toggler span {
            color: white;
            font-size: 28px;
            position: absolute;
            transition: all 0.3s ease;
        }

        .chatbot-toggler .close-icon {
            opacity: 0;
            transform: rotate(-90deg);
        }

        body.show-chatbot .chatbot-toggler .chat-icon {
            opacity: 0;
            transform: rotate(90deg);
        }

        body.show-chatbot .chatbot-toggler .close-icon {
            opacity: 1;
            transform: rotate(0deg);
        }

        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #e74c3c;
            color: white;
            width: 22px;
            height: 22px;
            border-radius: 50%;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            animation: pulse-badge 2s infinite;
        }

        @keyframes pulse-badge {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .chatbot-container {
            position: fixed;
            bottom: 100px;
            right: 30px;
            width: 420px;
            max-width: calc(100vw - 60px);
            height: 550px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            overflow: hidden;
            transform: scale(0) translateY(20px);
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 9998;
            display: flex;
            flex-direction: column;
        }

        body.show-chatbot .chatbot-container {
            transform: scale(1) translateY(0);
            opacity: 1;
        }

        .chat-header {
            background: linear-gradient(135deg, #1a472a 0%, #2ecc71 100%);
            color: white;
            padding: 15px 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-shrink: 0;
        }

        .chat-header-info {
            flex: 1;
        }

        .chat-header h2 {
            font-size: 16px;
            margin-bottom: 3px;
        }

        .chat-header .status {
            font-size: 11px;
            opacity: 0.9;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            background: #27ae60;
            border-radius: 50%;
            animation: blink 2s infinite;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        .header-controls {
            display: flex;
            gap: 5px;
            align-items: center;
        }

        .icon-btn {
            width: 32px;
            height: 32px;
            border: 1px solid white;
            background: transparent;
            color: white;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .icon-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .icon-btn.active {
            background: white;
            color: #1a472a;
        }

        .language-selector {
            display: flex;
            gap: 3px;
        }

        .lang-btn {
            padding: 4px 8px;
            border: 1px solid white;
            background: transparent;
            color: white;
            border-radius: 8px;
            cursor: pointer;
            font-size: 9px;
            transition: all 0.3s;
        }

        .lang-btn.active {
            background: white;
            color: #1a472a;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            background: #f8f9fa;
        }

        .chat-messages::-webkit-scrollbar {
            width: 6px;
        }

        .chat-messages::-webkit-scrollbar-thumb {
            background: #cbd5e0;
            border-radius: 10px;
        }

        .message {
            margin-bottom: 15px;
            display: flex;
            align-items: flex-start;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message.user {
            flex-direction: row-reverse;
        }

        .message-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            flex-shrink: 0;
        }

        .message.bot .message-avatar {
            background: linear-gradient(135deg, #2ecc71, #1a472a);
            color: white;
        }

        .message.user .message-avatar {
            background: #ecf0f1;
        }

        .message-content {
            max-width: 75%;
            padding: 12px 16px;
            border-radius: 15px;
            word-wrap: break-word;
            font-size: 14px;
            line-height: 1.5;
            margin: 0 10px;
        }

        .message.bot .message-content {
            background: white;
            color: #333;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            border-bottom-left-radius: 5px;
        }

        .message.user .message-content {
            background: #2ecc71;
            color: white;
            border-bottom-right-radius: 5px;
        }

        .message-time {
            font-size: 10px;
            opacity: 0.7;
            margin-top: 5px;
            display: block;
        }

        .typing-indicator {
            display: none;
            padding: 12px 16px;
            background: white;
            border-radius: 15px;
            width: fit-content;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            margin-left: 42px;
        }

        .typing-indicator span {
            display: inline-block;
            width: 8px;
            height: 8px;
            background: #2ecc71;
            border-radius: 50%;
            margin: 0 2px;
            animation: typing 1.4s infinite;
        }

        .typing-indicator span:nth-child(2) { animation-delay: 0.2s; }
        .typing-indicator span:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-10px); }
        }

        .chat-input-area {
            padding: 15px 20px;
            background: white;
            border-top: 1px solid #e0e0e0;
            flex-shrink: 0;
        }

        .input-controls {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        #userInput {
            flex: 1;
            padding: 10px 14px;
            border: 2px solid #e0e0e0;
            border-radius: 20px;
            font-size: 13px;
            outline: none;
            transition: border 0.3s;
            font-family: inherit;
        }

        #userInput:focus {
            border-color: #2ecc71;
        }

        .btn-send, .btn-voice, .btn-add {
            width: 38px;
            height: 38px;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            font-size: 16px;
        }

        .btn-send {
            background: #2ecc71;
            color: white;
        }

        .btn-send:hover {
            background: #27ae60;
            transform: scale(1.1);
        }

        .btn-voice {
            background: #3498db;
            color: white;
        }

        .btn-voice:hover {
            background: #2980b9;
        }

        .btn-voice.recording {
            background: #e74c3c;
            animation: pulse-recording 1s infinite;
        }

        .btn-add {
            background: #9b59b6;
            color: white;
        }

        .btn-add:hover {
            background: #8e44ad;
            transform: scale(1.1);
        }

        @keyframes pulse-recording {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.15); }
        }

        .course-link {
            display: inline-block;
            margin-top: 8px;
            padding: 6px 12px;
            background: #2ecc71;
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-size: 12px;
            transition: background 0.3s;
        }

        .course-link:hover {
            background: #27ae60;
        }

        .quick-suggestions {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
        }

        .suggestion-btn {
            padding: 6px 10px;
            background: #ecf0f1;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-size: 11px;
            transition: all 0.3s;
            color: #2c3e50;
        }

        .suggestion-btn:hover {
            background: #2ecc71;
            color: white;
        }

        /* Modal ŸÑŸÑÿ•ÿ∂ÿßŸÅÿ© */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            z-index: 10000;
            justify-content: center;
            align-items: center;
        }

        .modal.show {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 15px;
            padding: 25px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            animation: modalSlideIn 0.3s ease;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-header h3 {
            color: #1a472a;
            font-size: 18px;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #666;
            transition: color 0.3s;
        }

        .modal-close:hover {
            color: #e74c3c;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            color: #333;
            font-size: 13px;
            font-weight: 600;
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 10px 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 13px;
            font-family: inherit;
            transition: border 0.3s;
        }

        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #2ecc71;
        }

        .form-group textarea {
            resize: vertical;
            min-height: 80px;
        }

        .modal-actions {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
            margin-top: 20px;
        }

        .btn-modal {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 600;
            transition: all 0.3s;
        }

        .btn-primary {
            background: #2ecc71;
            color: white;
        }

        .btn-primary:hover {
            background: #27ae60;
        }

        .btn-secondary {
            background: #95a5a6;
            color: white;
        }

        .btn-secondary:hover {
            background: #7f8c8d;
        }

        .learned-badge {
            display: inline-block;
            background: #9b59b6;
            color: white;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 10px;
            margin-right: 5px;
        }

        @media (max-width: 480px) {
            .chatbot-container {
                width: 100%;
                height: 100%;
                bottom: 0;
                right: 0;
                border-radius: 0;
            }

            .chatbot-toggler {
                bottom: 20px;
                right: 20px;
            }

            .modal-content {
                width: 95%;
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <button class="chatbot-toggler" id="chatbotToggler">
        <span class="chat-icon">üí¨</span>
        <span class="close-icon">‚úï</span>
        <span class="notification-badge" id="notificationBadge" style="display: none;">1</span>
    </button>

    <div class="chatbot-container">
        <div class="chat-header">
            <div class="chat-header-info">
                <h2 id="chatTitle">ŸÖÿ≥ÿßÿπÿØ ÿßŸÑÿ™ÿØÿ±Ÿäÿ® ÿßŸÑÿ∞ŸÉŸä üß†</h2>
                <div class="status">
                    <span class="status-dot"></span>
                    <span id="statusText">ŸÖÿ™ÿµŸÑ ‚Ä¢ Ÿäÿ™ÿπŸÑŸÖ ŸÖŸÜ ÿ£ÿ≥ÿ¶ŸÑÿ™ŸÉ</span>
                </div>
            </div>
            <div class="header-controls">
                <button class="icon-btn" id="soundBtn" onclick="toggleSound()" title="ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿµŸàÿ™">üîá</button>
                <div class="language-selector">
                    <button class="lang-btn active" data-lang="ar" onclick="switchLanguage('ar')">AR</button>
                    <button class="lang-btn" data-lang="fr" onclick="switchLanguage('fr')">FR</button>
                    <button class="lang-btn" data-lang="en" onclick="switchLanguage('en')">EN</button>
                </div>
            </div>
        </div>

        <div class="chat-messages" id="chatMessages">
            <div class="typing-indicator" id="typingIndicator">
                <span></span><span></span><span></span>
            </div>
        </div>

        <div class="chat-input-area">
            <div class="input-controls">
                <input type="text" id="userInput" placeholder="ÿßÿ∑ÿ±ÿ≠ ÿ≥ÿ§ÿßŸÑŸÉ..." />
                <button class="btn-add" onclick="openAddKnowledgeModal()" title="ÿ£ÿ∂ŸÅ ŸÖÿπŸÑŸàŸÖÿ© ÿ¨ÿØŸäÿØÿ©">‚ûï</button>
                <button class="btn-voice" id="voiceBtn" onclick="toggleVoiceRecognition()" title="ŸÖŸäŸÉÿ±ŸàŸÅŸàŸÜ">üé§</button>
                <button class="btn-send" onclick="sendMessage()" title="ÿ•ÿ±ÿ≥ÿßŸÑ">üì§</button>
            </div>
        </div>
    </div>

    <!-- Modal ŸÑÿ•ÿ∂ÿßŸÅÿ© ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿ¨ÿØŸäÿØÿ© -->
    <div class="modal" id="addKnowledgeModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>‚ûï ÿ£ÿ∂ŸÅ ŸÖÿπŸÑŸàŸÖÿ© ÿ¨ÿØŸäÿØÿ©</h3>
                <button class="modal-close" onclick="closeAddKnowledgeModal()">√ó</button>
            </div>
            <form onsubmit="saveNewKnowledge(event)">
                <div class="form-group">
                    <label for="newKeywords">ÿßŸÑŸÉŸÑŸÖÿßÿ™ ÿßŸÑŸÖŸÅÿ™ÿßÿ≠Ÿäÿ© (ÿßŸÅÿµŸÑ ÿ®ŸÅÿßÿµŸÑÿ©)</label>
                    <input type="text" id="newKeywords" placeholder="ŸÖÿ´ÿßŸÑ: ÿ™ŸÇŸäŸäŸÖÿå ŸÇŸäÿßÿ≥ÿå ÿßÿÆÿ™ÿ®ÿßÿ±" required>
                </div>
                <div class="form-group">
                    <label for="newResponse">ÿßŸÑÿ•ÿ¨ÿßÿ®ÿ©/ÿßŸÑŸÖÿπŸÑŸàŸÖÿ©</label>
                    <textarea id="newResponse" placeholder="ÿßŸÉÿ™ÿ® ÿßŸÑŸÖÿπŸÑŸàŸÖÿ© ÿßŸÑÿ™Ÿä ÿ™ÿ±ŸäÿØ ÿ•ÿ∂ÿßŸÅÿ™Ÿáÿß..." required></textarea>
                </div>
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="showLinkCheckbox" checked>
                        ÿπÿ±ÿ∂ ÿ±ÿßÿ®ÿ∑ ÿßŸÑÿØÿ±ÿ≥ ŸÖÿπ ÿßŸÑÿ•ÿ¨ÿßÿ®ÿ©
                    </label>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn-modal btn-secondary" onclick="closeAddKnowledgeModal()">ÿ•ŸÑÿ∫ÿßÿ°</button>
                    <button type="submit" class="btn-modal btn-primary">ÿ≠ŸÅÿ∏</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        const COURSE_CONFIG = {
            courseUrl: 'http://association.courdescomptes.nat.tn:8080/course/view.php?id=43',
            courseName: 'ÿØŸàÿ±ÿ© ÿ™ÿØÿ±Ÿäÿ® ÿ£ÿÆÿµÿßÿ¶Ÿä ÿßŸÑÿ™ÿπŸÑŸÖ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä - ŸÖÿ≠ŸÉŸÖÿ© ÿßŸÑŸÖÿ≠ÿßÿ≥ÿ®ÿßÿ™'
        };

      const KNOWLEDGE_BASE = {
  ar: {
    suggestions: [
      'ŸÜŸÖŸàÿ∞ÿ¨ VARK', 'ŸÜÿ∏ÿ±Ÿäÿ© ŸÉŸàŸÑÿ®', 'ÿ™ÿµŸÜŸäŸÅ ÿ®ŸÑŸàŸÖ', 'ŸÜÿ∏ÿ±Ÿäÿßÿ™ ÿßŸÑÿ™ÿπŸÑŸÖ',
      'ADDIE', 'ÿ™ÿ≠ŸÑŸäŸÑ ÿßŸÑÿßÿ≠ÿ™Ÿäÿßÿ¨ÿßÿ™', 'ÿ£ŸÜŸÖÿßÿ∑ ÿßŸÑŸÖÿ™ÿπŸÑŸÖŸäŸÜ'
    ],

    sections: [
      /* -------------------------------------------------------------
         üîµ ŸÜÿ∏ÿ±Ÿäÿßÿ™ ÿßŸÑÿ™ÿπŸÑŸÖ ‚Äì Learning Theories
      --------------------------------------------------------------*/
      {
        keywords: ['ÿßŸÑÿ™ÿπŸÑŸÖ ÿßŸÑÿ≥ŸÑŸàŸÉŸä', 'ÿßŸÑÿ™ÿπŸÑŸÖ ÿßŸÑÿ®ŸÜÿßÿ¶Ÿä', 'ÿ≥ŸÉŸÜÿ±', 'ÿ®Ÿäÿßÿ¨ŸäŸá', 'ÿ™ÿπÿ≤Ÿäÿ≤', 'ÿ®ŸÜÿßÿ° ÿßŸÑŸÖÿπÿ±ŸÅÿ©'],
        response:
          "üß† **ÿßŸÑŸÅÿ±ŸÇ ÿ®ŸäŸÜ ÿßŸÑÿ≥ŸÑŸàŸÉŸäÿ© ŸàÿßŸÑÿ®ŸÜÿßÿ¶Ÿäÿ©**:\n" +
          "- ÿßŸÑÿ≥ŸÑŸàŸÉŸäÿ©: ÿ™ÿ±ŸÉÿ≤ ÿπŸÑŸâ ÿ™ÿπÿØŸäŸÑ ÿßŸÑÿ≥ŸÑŸàŸÉ ŸÖŸÜ ÿÆŸÑÿßŸÑ ÿßŸÑÿ™ÿπÿ≤Ÿäÿ≤ ŸàÿßŸÑŸÖŸÉÿßŸÅÿ£ÿ©.\n" +
          "- ÿßŸÑÿ®ŸÜÿßÿ¶Ÿäÿ©: ÿ™ÿ±Ÿâ ÿ£ŸÜ ÿßŸÑŸÖÿ™ÿπŸÑŸëŸÖ Ÿäÿ®ŸÜŸä ŸÖÿπÿ±ŸÅÿ™Ÿá ÿ∞ÿßÿ™ŸäÿßŸã ÿπÿ®ÿ± ÿßŸÑÿ™ŸÅÿßÿπŸÑ ŸàÿßŸÑÿÆÿ®ÿ±ÿ©.\n" +
          "ÿßŸÑÿ≥ŸÑŸàŸÉŸäÿ© ÿ™ÿπÿ™ŸÖÿØ ÿπŸÑŸâ ÿßŸÑŸÖÿ´Ÿäÿ±‚ÄìÿßŸÑÿßÿ≥ÿ™ÿ¨ÿßÿ®ÿ©ÿå ÿ®ŸäŸÜŸÖÿß ÿßŸÑÿ®ŸÜÿßÿ¶Ÿäÿ© ÿ™ÿπÿ™ŸÖÿØ ÿπŸÑŸâ ÿßŸÑÿ™ŸÅŸÉŸäÿ± ÿßŸÑÿπŸÖŸäŸÇ Ÿàÿ≠ŸÑ ÿßŸÑŸÖÿ¥ŸÉŸÑÿßÿ™.",
        showLink: true
      },
      {
        keywords: ['ŸÜÿ∏ÿ±Ÿäÿ© ŸÖÿπÿ±ŸÅŸäÿ©', 'ŸÖÿπÿßŸÑÿ¨ÿ© ÿßŸÑŸÖÿπŸÑŸàŸÖÿßÿ™', 'ÿßŸÑÿ∞ÿßŸÉÿ±ÿ©', 'ÿßŸÑÿßŸÜÿ™ÿ®ÿßŸá', 'ÿßŸÑÿπŸÖŸÑŸäÿßÿ™ ÿßŸÑÿπŸÇŸÑŸäÿ©'],
        response:
          "üß† **ÿ¨ŸàŸáÿ± ÿßŸÑŸÜÿ∏ÿ±Ÿäÿ© ÿßŸÑŸÖÿπÿ±ŸÅŸäÿ©**: ÿ™ÿ±ŸÉÿ≤ ÿπŸÑŸâ ŸÉŸäŸÅŸäÿ© ÿßÿ≥ÿ™ŸÇÿ®ÿßŸÑ ÿßŸÑŸÖÿπŸÑŸàŸÖÿßÿ™ÿå ŸàŸÖÿπÿßŸÑÿ¨ÿ™Ÿáÿßÿå Ÿàÿ™ÿÆÿ≤ŸäŸÜŸáÿß ŸÅŸä ÿßŸÑÿ∞ÿßŸÉÿ±ÿ©. Ÿàÿ™ÿ±ŸÉÿ≤ ÿπŸÑŸâ ÿßŸÑÿßŸÜÿ™ÿ®ÿßŸá ŸàÿßŸÑÿ™ÿ¥ŸÅŸäÿ± ŸàÿßŸÑÿßÿ≥ÿ™ÿ±ÿ¨ÿßÿπ.",
        showLink: true
      },
      {
        keywords: ['ÿßŸÑÿ™ÿπŸÑŸÖ ÿßŸÑÿßÿ¨ÿ™ŸÖÿßÿπŸä', 'ÿ®ÿßŸÜÿØŸàÿ±ÿß', 'ÿßŸÑŸÜŸÖÿ∞ÿ¨ÿ©', 'ÿ™ŸÇŸÑŸäÿØ', 'ŸÖÿ≠ÿßŸÉÿßÿ©'],
        response:
          "üë• **ÿßŸÑÿ™ÿπŸÑŸÖ ÿßŸÑÿßÿ¨ÿ™ŸÖÿßÿπŸä** Ÿäÿ§ŸÉÿØ ÿ£ŸÜ ÿßŸÑŸÖÿ™ÿπŸÑŸÖ ŸäŸÉÿ™ÿ≥ÿ® ÿßŸÑÿ≥ŸÑŸàŸÉ ŸÖŸÜ ÿÆŸÑÿßŸÑ ŸÖŸÑÿßÿ≠ÿ∏ÿ© ÿßŸÑÿ¢ÿÆÿ±ŸäŸÜ (ÿßŸÑŸÜŸÖÿ∞ÿ¨ÿ©). ŸÅŸä ÿßŸÑÿ™ÿπŸÑŸÖ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä Ÿäÿ™ŸÖ ÿπÿ®ÿ± ÿßŸÑŸÅŸäÿØŸäŸàŸáÿßÿ™ÿå ÿßŸÑŸÖŸÜÿ™ÿØŸäÿßÿ™ÿå ŸàÿØÿ±ÿßÿ≥ÿ© ÿßŸÑÿ≠ÿßŸÑÿßÿ™.",
        showLink: true
      },
      {
        keywords: ['ÿ™ÿπŸÑŸÖ ÿ•ŸÜÿ≥ÿßŸÜŸä', 'ÿ•ŸÜÿ≥ÿßŸÜŸäÿ©', 'ŸÖÿßÿ≥ŸÑŸà', 'ÿßŸÑÿØÿßŸÅÿπŸäÿ©', 'ÿßŸÑÿ™ÿπŸÑŸÖ ÿßŸÑŸÖÿ™ŸÖÿ±ŸÉÿ≤ ÿ≠ŸàŸÑ ÿßŸÑŸÖÿ™ÿπŸÑŸÖ'],
        response:
          "üå± **ÿßŸÑŸÜÿ∏ÿ±Ÿäÿ© ÿßŸÑÿ•ŸÜÿ≥ÿßŸÜŸäÿ©**: ÿ™ÿ±ŸÉÿ≤ ÿπŸÑŸâ ÿßÿ≠ÿ™ÿ±ÿßŸÖ ÿßŸÑŸÖÿ™ÿπŸÑŸÖÿå Ÿàÿ™ŸÑÿ®Ÿäÿ© ÿ≠ÿßÿ¨ÿßÿ™Ÿáÿå Ÿàÿ•ÿπÿ∑ÿßÿ° ŸÖÿπŸÜŸâ ŸÑŸÑÿ™ÿπŸÑŸÖ. ŸÅŸä ÿßŸÑÿ™ÿπŸÑŸäŸÖ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä ÿ™ÿ∏Ÿáÿ± ŸÅŸä ÿßŸÑŸÖÿ±ŸàŸÜÿ©ÿå ÿßŸÑÿ™ÿÆÿµŸäÿµÿå ŸàÿßŸÑÿØÿπŸÖ ÿßŸÑŸÖÿ≥ÿ™ŸÖÿ±.",
        showLink: true
      },

      /* -------------------------------------------------------------
         üîµ ŸÜŸÖŸàÿ∞ÿ¨ VARK ‚Äì ÿ£ŸÜŸÖÿßÿ∑ ÿßŸÑÿ™ÿπŸÑŸëŸÖ
      --------------------------------------------------------------*/
      {
        keywords: ['vark', 'ŸÅÿßÿ±ŸÉ', 'ÿ£ŸÜŸÖÿßÿ∑ ÿßŸÑÿ™ÿπŸÑŸÖ', 'ÿ®ÿµÿ±Ÿä', 'ÿ≥ŸÖÿπŸä', 'ŸÇÿ±ÿßÿ¶Ÿä', 'ŸÉÿ™ÿßÿ®Ÿä', 'ÿ≠ÿ≥Ÿä'],
        response:
          "üé® **ŸÜŸÖŸàÿ∞ÿ¨ VARK** Ÿäÿ≠ÿ™ŸàŸä ÿ£ÿ±ÿ®ÿπÿ© ÿ£ŸÜŸÖÿßÿ∑: ÿ®ÿµÿ±Ÿäÿå ÿ≥ŸÖÿπŸäÿå ŸÇÿ±ÿßÿ¶Ÿä/ŸÉÿ™ÿßÿ®Ÿäÿå ÿ≠ÿ≥Ÿä. Ÿäÿ≥ÿßÿπÿØ ŸÅŸä ÿ™ŸÜŸàŸäÿπ ÿ∑ÿ±ŸÇ ÿßŸÑÿ™ÿØÿ±Ÿäÿ≥.",
        showLink: true
      },
      {
        keywords: ['ŸÖÿ™ÿπŸÑŸÖŸäŸÜ ÿ®ÿµÿ±ŸäŸäŸÜ', 'ÿµŸàÿ±', 'ŸÖÿÆÿ∑ÿ∑ÿßÿ™', 'ÿÆÿ±ÿßÿ¶ÿ∑ ÿ∞ŸáŸÜŸäÿ©'],
        response:
          "üëÅÔ∏è ÿßŸÑŸÖÿ™ÿπŸÑŸÖ ÿßŸÑÿ®ÿµÿ±Ÿä ŸäŸÅÿ∂ŸÑ ÿßŸÑÿµŸàÿ±ÿå ÿßŸÑŸÖÿÆÿ∑ÿ∑ÿßÿ™ÿå ÿßŸÑŸÅŸäÿØŸäŸà ÿßŸÑŸÇÿµŸäÿ±ÿå ÿßŸÑÿÆÿ±ÿßÿ¶ÿ∑ ÿßŸÑÿ∞ŸáŸÜŸäÿ©.",
        showLink: true
      },
      {
        keywords: ['ŸÖÿ™ÿπŸÑŸÖŸäŸÜ ÿ≥ŸÖÿπŸäŸäŸÜ', 'ÿ≥ŸÖÿπŸä', 'ÿ™ÿ≥ÿ¨ŸäŸÑÿßÿ™ ÿµŸàÿ™Ÿäÿ©', 'ŸÜŸÇÿßÿ¥', 'ŸÖÿ≠ÿßÿ∂ÿ±ÿ©'],
        response:
          "üëÇ ÿßŸÑŸÖÿ™ÿπŸÑŸÖ ÿßŸÑÿ≥ŸÖÿπŸä ŸäŸÜÿßÿ≥ÿ®Ÿá ÿßŸÑŸÜŸÇÿßÿ¥ÿå ÿßŸÑÿ¥ÿ±ÿ≠ ÿßŸÑÿµŸàÿ™Ÿäÿå ÿßŸÑŸÖŸÑŸÅÿßÿ™ ÿßŸÑÿµŸàÿ™Ÿäÿ©ÿå ŸàÿßŸÑÿ™ŸÅÿßÿπŸÑ ÿßŸÑÿ¥ŸÅŸáŸä.",
        showLink: true
      },
      {
        keywords: ['ŸÇÿ±ÿßÿ°ÿ©', 'ŸÉÿ™ÿßÿ®ÿ©', 'ŸÇÿ±ÿßÿ¶Ÿä', 'ŸÖŸÑŸÅÿßÿ™ ŸÜÿµŸäÿ©', 'ŸÖŸÇÿßŸÑÿßÿ™'],
        response:
          "üìò ŸÜŸÖÿ∑ ÿßŸÑŸÇÿ±ÿßÿ°ÿ©/ÿßŸÑŸÉÿ™ÿßÿ®ÿ© ŸäŸÅÿ∂ŸÑ ÿßŸÑŸÜÿµŸàÿµÿå ÿßŸÑÿ™ŸÇÿßÿ±Ÿäÿ±ÿå ÿßŸÑŸÇŸàÿßÿ¶ŸÖÿå ÿßŸÑŸÖŸÇÿßŸÑÿßÿ™ÿå ÿßŸÑŸÖŸÑÿÆÿµÿßÿ™ ÿßŸÑŸÖŸÉÿ™Ÿàÿ®ÿ©.",
        showLink: true
      },
      {
        keywords: ['ÿ≠ÿ≥Ÿä', 'ÿ™ÿπŸÑŸÖ ÿπŸÖŸÑŸä', 'ŸÖÿ≠ÿßŸÉÿßÿ©', 'ÿ™ÿ∑ÿ®ŸäŸÇ', 'ÿ™ÿ¨ÿ±ÿ®ÿ©'],
        response:
          "‚úã ÿßŸÑŸÖÿ™ÿπŸÑŸÖ ÿßŸÑÿ≠ÿ≥Ÿä Ÿäÿπÿ™ŸÖÿØ ÿπŸÑŸâ ÿßŸÑÿ™ÿ¨ÿ±ÿ®ÿ©: ÿßŸÑŸÖÿ≠ÿßŸÉÿßÿ©ÿå ÿßŸÑÿ£ŸÜÿ¥ÿ∑ÿ© ÿßŸÑÿπŸÖŸÑŸäÿ©ÿå ÿØÿ±ÿßÿ≥ÿßÿ™ ÿßŸÑÿ≠ÿßŸÑÿ©.",
        showLink: true
      },

      /* -------------------------------------------------------------
         üîµ ŸÜŸÖŸàÿ∞ÿ¨ ŸÉŸàŸÑÿ® Kolb
      --------------------------------------------------------------*/
      {
        keywords: ['ŸÉŸàŸÑÿ®', 'kolb', 'ÿØŸàÿ±ÿ© ŸÉŸàŸÑÿ®', 'ÿ™ÿπŸÑŸÖ ÿ™ÿ¨ÿ±Ÿäÿ®Ÿä'],
        response:
          "üîÑ ŸÜŸÖŸàÿ∞ÿ¨ ŸÉŸàŸÑÿ® ŸäŸÖÿ± ÿ®ŸÄ 4 ŸÖÿ±ÿßÿ≠ŸÑ: ÿßŸÑÿ™ÿ¨ÿ±ÿ®ÿ© ÿßŸÑŸÖŸÑŸÖŸàÿ≥ÿ© ‚Üí ÿßŸÑŸÖŸÑÿßÿ≠ÿ∏ÿ© ‚Üí ÿßŸÑÿ™ÿ¨ÿ±ŸäÿØ ‚Üí ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ ÿßŸÑŸÜÿ¥ÿ∑.",
        showLink: true
      },
      {
        keywords: ['ÿ™ÿ∑ÿ®ŸäŸÇ ŸÉŸàŸÑÿ®', 'ÿ™ÿπŸÑŸÖ ÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä', 'ÿßŸÜÿπŸÉÿßÿ≥', 'ŸÜÿ¥ÿßÿ∑'],
        response:
          "üí° ÿ™ÿ∑ÿ®ŸäŸÇ ŸÉŸàŸÑÿ® ŸÅŸä ÿØŸàÿ±ÿ© ÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸäÿ©:\n" +
          "1) ÿ™ÿ¨ÿ±ÿ®ÿ© (ŸÅŸäÿØŸäŸà/ŸÖÿ≠ÿßŸÉÿßÿ©)\n2) ÿ≥ÿ§ÿßŸÑ ÿßŸÜÿπŸÉÿßÿ≥Ÿä\n3) ÿ¥ÿ±ÿ≠ ŸÜÿ∏ÿ±Ÿä\n4) ÿ™ŸÖÿ±ŸäŸÜ ÿ™ÿ∑ÿ®ŸäŸÇŸä.",
        showLink: true
      },
      {
        keywords: ['ÿ£ŸÜŸÖÿßÿ∑ ŸÉŸàŸÑÿ®', 'ÿßÿ≥ÿ™Ÿäÿπÿßÿ®', 'ÿ™ŸÇÿßÿ±ÿ®', 'ÿ™ŸÉŸäŸëŸÅ', 'ÿßŸÜÿπŸÉÿßÿ≥'],
        response:
          "üß¨ ÿ£ŸÜŸÖÿßÿ∑ ŸÉŸàŸÑÿ®:\n- ÿßŸÑŸÖÿ™ŸÇÿßÿ±ÿ®: Ÿäÿ≠ÿ® ÿ≠ŸÑ ÿßŸÑŸÖÿ¥ŸÉŸÑÿßÿ™.\n- ÿßŸÑÿßÿ≥ÿ™Ÿäÿπÿßÿ®Ÿä: ŸäŸÅÿ∂ŸÑ ÿßŸÑŸÜÿ∏ÿ±Ÿäÿßÿ™.\n- ÿßŸÑŸÖÿ™ŸÉŸäŸÅ: Ÿäÿπÿ™ŸÖÿØ ÿßŸÑÿ™ÿ¨ÿ±Ÿäÿ®.\n- ÿßŸÑÿßÿ≥ÿ™Ÿäÿπÿßÿ®Ÿä ÿßŸÑŸÖÿ™ÿ£ŸÖŸÑ: Ÿäÿ±ÿ™ŸÉÿ≤ ÿπŸÑŸâ ÿßŸÑÿ™ŸÅŸÉŸäÿ±.",
        showLink: true
      },

      /* -------------------------------------------------------------
         üîµ ÿ™ÿµŸÜŸäŸÅ ÿ®ŸÑŸàŸÖ Bloom
      --------------------------------------------------------------*/
      {
        keywords: ['ÿ®ŸÑŸàŸÖ', 'ÿ™ÿµŸÜŸäŸÅ ÿ®ŸÑŸàŸÖ', 'ŸÖÿ≥ÿ™ŸàŸäÿßÿ™ ÿ®ŸÑŸàŸÖ'],
        response:
          "üéØ ŸÖÿ≥ÿ™ŸàŸäÿßÿ™ ÿ®ŸÑŸàŸÖ: ÿßŸÑŸÖÿπÿ±ŸÅÿ© ‚Üí ÿßŸÑŸÅŸáŸÖ ‚Üí ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ ‚Üí ÿßŸÑÿ™ÿ≠ŸÑŸäŸÑ ‚Üí ÿßŸÑÿ™ÿ±ŸÉŸäÿ® ‚Üí ÿßŸÑÿ™ŸÇŸäŸäŸÖ.",
        showLink: true
      },
      {
        keywords: ['ÿ®ŸÑŸàŸÖ ÿßŸÑŸÖÿ≠ÿØÿ´', 'ÿ™ÿ∞ŸÉÿ±', 'ŸÅŸáŸÖ', 'ÿ™ÿ∑ÿ®ŸäŸÇ', 'ÿ™ÿ≠ŸÑŸäŸÑ', 'ÿ™ŸÇŸäŸäŸÖ', 'ÿßÿ®ÿ™ŸÉÿßÿ±'],
        response:
          "üöÄ ÿ®ŸÑŸàŸÖ ÿßŸÑŸÖÿ≠ÿØÿ´: ÿ™ÿ∞ŸÉÿ±ÿå ŸÅŸáŸÖÿå ÿ™ÿ∑ÿ®ŸäŸÇÿå ÿ™ÿ≠ŸÑŸäŸÑÿå ÿ™ŸÇŸäŸäŸÖÿå ÿßÿ®ÿ™ŸÉÿßÿ± (ÿ•ÿ®ÿØÿßÿπ).",
        showLink: true
      },
      {
        keywords: ['ÿµŸäÿßÿ∫ÿ© ÿ£ŸáÿØÿßŸÅ', 'ÿ£ŸÅÿπÿßŸÑ ÿ®ŸÑŸàŸÖ', 'ŸáÿØŸÅ ŸÇÿßÿ®ŸÑ ŸÑŸÑŸÇŸäÿßÿ≥'],
        response:
          "üìù ŸÑÿµŸäÿßÿ∫ÿ© ÿ£ŸáÿØÿßŸÅ ÿ™ÿπŸÑŸÖ: ÿßÿ≥ÿ™ÿÆÿØŸÖ ÿ£ŸÅÿπÿßŸÑ ŸÖÿ´ŸÑ: Ÿäÿπÿ±ŸëŸÅÿå Ÿäÿ¥ÿ±ÿ≠ÿå Ÿäÿ∑ÿ®ŸÇÿå Ÿäÿ≠ŸÑŸÑÿå ŸäŸÇŸäŸÖÿå Ÿäÿ®ÿ™ŸÉÿ±. ÿßŸÑŸáÿØŸÅ Ÿäÿ¨ÿ® ÿ£ŸÜ ŸäŸÉŸàŸÜ ŸÇÿßÿ®ŸÑÿßŸã ŸÑŸÑŸÇŸäÿßÿ≥.",
        showLink: true
      },
      {
        keywords: ['ÿ™ŸÇŸäŸäŸÖ', 'ÿ±ÿ®ÿ∑ ÿßŸÑÿ™ŸÇŸäŸäŸÖ', 'ÿ£ŸÜÿ¥ÿ∑ÿ© ÿ®ŸÑŸàŸÖ'],
        response:
          "üìä ÿßŸÑŸÖÿ≥ÿ™ŸàŸäÿßÿ™ ÿßŸÑÿ£ŸàŸÑŸâ ÿ™ŸÜÿßÿ≥ÿ® ÿ£ÿ≥ÿ¶ŸÑÿ© ÿßÿÆÿ™Ÿäÿßÿ± ŸÖŸÜ ŸÖÿ™ÿπÿØÿØÿå ÿ£ŸÖÿß ÿßŸÑÿ™ÿ≠ŸÑŸäŸÑ ŸàÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ ŸÅÿ™ÿ≠ÿ™ÿßÿ¨ ŸÖŸáÿßŸÖ ÿ™ÿ∑ÿ®ŸäŸÇŸäÿ©. ÿßŸÑŸÖÿ≥ÿ™ŸàŸäÿßÿ™ ÿßŸÑÿπŸÑŸäÿß ÿ™ÿ≠ÿ™ÿßÿ¨ ŸÖÿ¥ÿßÿ±Ÿäÿπ Ÿàÿ•ŸÜÿ¥ÿßÿ° ŸÖÿ≠ÿ™ŸàŸâ.",
        showLink: true
      },

      /* -------------------------------------------------------------
         üîµ ÿØŸÖÿ¨ ÿßŸÑŸÜŸÖÿßÿ∞ÿ¨
      --------------------------------------------------------------*/
      {
        keywords: ['ÿØŸÖÿ¨ ÿßŸÑŸÜŸÖÿßÿ∞ÿ¨', 'VARK', 'ŸÉŸàŸÑÿ®', 'ÿ™ÿµŸÖŸäŸÖ ÿ™ÿπŸÑŸÖ'],
        response:
          "üîó ÿØŸÖÿ¨ VARK ŸÖÿπ ŸÉŸàŸÑÿ®: ÿ£ŸÜÿ¥ÿ∑ÿ© ŸÖÿ™ŸÜŸàÿπÿ© ÿ™ŸÑÿßÿ¶ŸÖ ŸÉŸÑ ŸÜŸÖÿ∑ ‚Äî ŸÖÿ≠ÿßŸÉÿßÿ© ŸÑŸÑÿ≠ÿ≥Ÿäÿå ŸÖÿÆÿ∑ÿ∑ÿßÿ™ ŸÑŸÑÿ®ÿµÿ±Ÿäÿå ŸÜŸÇÿßÿ¥ ŸÑŸÑÿ≥ŸÖÿπŸäÿå ŸÜÿµŸàÿµ ŸÑŸÑŸÇÿ±ÿßÿ¶Ÿä.",
        showLink: true
      },
      {
        keywords: ['ÿ®ŸÑŸàŸÖ', 'ŸÜÿ∏ÿ±Ÿäÿßÿ™ ÿßŸÑÿ™ÿπŸÑŸÖ', 'ÿØŸÖÿ¨ ÿßŸÑŸÜŸÖÿßÿ∞ÿ¨'],
        response:
          "üîó ÿ®ŸÑŸàŸÖ + ŸÜÿ∏ÿ±Ÿäÿßÿ™ ÿßŸÑÿ™ÿπŸÑŸÖ: ÿßŸÑŸÖÿ≥ÿ™ŸàŸäÿßÿ™ ÿßŸÑÿØŸÜŸäÿß ÿ™ŸÜÿßÿ≥ÿ® ÿßŸÑÿ≥ŸÑŸàŸÉŸäÿ©ÿå ÿßŸÑŸàÿ≥ÿ∑Ÿâ ÿ™ŸÜÿßÿ≥ÿ® ÿßŸÑŸÖÿπÿ±ŸÅŸäÿ©ÿå ÿßŸÑÿπŸÑŸäÿß ÿ™ŸÜÿßÿ≥ÿ® ÿßŸÑÿ®ŸÜÿßÿ¶Ÿäÿ©.",
        showLink: true
      },

      /* -------------------------------------------------------------
         üîµ ŸÖÿ±ÿ≠ŸÑÿ© ÿßŸÑÿ™ÿ≠ŸÑŸäŸÑ (Analysis)
      --------------------------------------------------------------*/
      {
        keywords: ['ŸÅÿ¨Ÿàÿ© ÿßŸÑÿ£ÿØÿßÿ°', 'ÿ≥ÿ®ÿ® ÿßŸÑŸÖÿ¥ŸÉŸÑÿ©', 'ÿ™ÿ≠ŸÑŸäŸÑ ÿßŸÑÿ≥ÿ®ÿ® ÿßŸÑÿ¨ÿ∞ÿ±Ÿä', 'ÿ≠ŸÑ ÿ∫Ÿäÿ± ÿ™ÿØÿ±Ÿäÿ®Ÿä'],
        response:
          "üîç ÿßŸÑÿ™ÿØÿ±Ÿäÿ® ŸäŸèÿ≥ÿ™ÿÆÿØŸÖ ŸÅŸÇÿ∑ ÿ•ÿ∞ÿß ŸÉÿßŸÜÿ™ ÿßŸÑŸÅÿ¨Ÿàÿ© ÿ®ÿ≥ÿ®ÿ® ŸÜŸÇÿµ ÿßŸÑŸÖŸáÿßÿ±ÿßÿ™. ÿ•ÿ∞ÿß ŸÉÿßŸÜ ÿßŸÑÿ≥ÿ®ÿ® ÿ•ÿØÿßÿ±ŸäÿßŸã ÿ£Ÿà ÿ™ŸÜÿ∏ŸäŸÖŸäÿßŸãÿå ŸÅÿßŸÑÿ≠ŸÑ ÿ∫Ÿäÿ± ÿ™ÿØÿ±Ÿäÿ®Ÿä.",
        showLink: true
      },
      {
        keywords: ['ÿ£ŸáÿØÿßŸÅ ÿßŸÑÿ£ÿØÿßÿ°', 'ÿ≥ŸÑŸàŸÉ ÿßŸÑŸÖÿ™ÿπŸÑŸÖ', 'ŸÜÿßÿ™ÿ¨ ÿßŸÑÿ™ÿπŸÑŸÖ'],
        response:
          "üéØ Ÿäÿ¨ÿ® ÿ™ÿ≠ÿØŸäÿØ ŸÖÿß ÿ≥ŸäŸÇŸàŸÖ ÿ®Ÿá ÿßŸÑŸÖÿ™ÿπŸÑŸÖ ÿ®ÿπÿØ ÿßŸÑÿ™ÿØÿ±Ÿäÿ®. ÿßŸÑŸáÿØŸÅ Ÿäÿ¨ÿ® ÿ£ŸÜ ŸäŸÉŸàŸÜ Ÿàÿßÿ∂ÿ≠ÿßŸã ŸàŸÇÿßÿ®ŸÑÿßŸã ŸÑŸÑŸÇŸäÿßÿ≥.",
        showLink: true
      },
      {
        keywords: ['ÿ™ÿ≠ŸÑŸäŸÑ ÿßŸÑŸÖÿ™ÿπŸÑŸÖŸäŸÜ', 'ÿßŸÑÿ¨ŸÖŸáŸàÿ± ÿßŸÑŸÖÿ≥ÿ™ŸáÿØŸÅ'],
        response:
          "üë• ÿ™ÿ≠ŸÑŸäŸÑ ÿßŸÑÿ¨ŸÖŸáŸàÿ± Ÿäÿ¥ŸÖŸÑ: ÿßŸÑÿÆÿ®ÿ±ÿ©ÿå ÿßŸÑŸÑÿ∫ÿ©ÿå ÿßŸÑŸÖŸáÿßÿ±ÿßÿ™ ÿßŸÑÿ™ŸÇŸÜŸäÿ©ÿå ÿßŸÑÿØÿßŸÅÿπŸäÿ©ÿå ÿßŸÑÿ™ŸÅÿ∂ŸäŸÑÿßÿ™.",
        showLink: true
      },
      {
        keywords: ['ÿ™ÿ≠ŸÑŸäŸÑ ÿßŸÑŸÖŸáÿßŸÖ', 'ÿÆÿ∑Ÿàÿßÿ™ ÿßŸÑÿ£ÿØÿßÿ°'],
        response:
          "üõ†Ô∏è ÿ™ÿ≠ŸÑŸäŸÑ ÿßŸÑŸÖŸáÿßŸÖ Ÿäÿ≠ÿØÿØ ÿßŸÑŸÖŸáÿßÿ±ÿßÿ™ ŸàÿßŸÑŸÖÿπÿ±ŸÅÿ© ÿßŸÑŸÑÿßÿ≤ŸÖÿ© ŸÑŸÉŸÑ ÿÆÿ∑Ÿàÿ© ŸÖŸÜ ÿÆÿ∑Ÿàÿßÿ™ ÿßŸÑÿπŸÖŸÑ.",
        showLink: true
      },

      /* -------------------------------------------------------------
         üîµ ÿßŸÑÿ™ÿµŸÖŸäŸÖ ‚Äì Design
      --------------------------------------------------------------*/
      {
        keywords: ['ÿ£ŸáÿØÿßŸÅ ÿßŸÑÿ™ÿπŸÑŸÖ', 'ŸÖÿπÿßŸäŸäÿ± ÿßŸÑŸÇŸäÿßÿ≥'],
        response:
          "‚úèÔ∏è ÿßŸÑŸáÿØŸÅ ÿßŸÑÿ™ÿπŸÑŸÖŸä Ÿäÿ™ŸÉŸàŸÜ ŸÖŸÜ: ÿßŸÑÿ≥ŸÑŸàŸÉÿå ÿßŸÑÿ¥ÿ±ÿ∑ÿå ÿßŸÑŸÖÿπŸäÿßÿ±. ŸàŸäÿ¨ÿ® ÿ£ŸÜ ŸäŸÉŸàŸÜ ŸÇÿßÿ®ŸÑÿßŸã ŸÑŸÑŸÇŸäÿßÿ≥.",
        showLink: true
      },
      {
        keywords: ['ŸáŸäŸÉŸÑÿ© ÿßŸÑŸÖÿ≠ÿ™ŸàŸâ', 'ÿßŸÑŸàÿ≠ÿØÿßÿ™'],
        response:
          "üìö ÿ™ÿ™ÿ∂ŸÖŸÜ ÿßŸÑŸáŸäŸÉŸÑÿ©: ŸÖŸÇÿØŸÖÿ©ÿå ÿ£ŸáÿØÿßŸÅÿå Ÿàÿ≠ÿØÿßÿ™ ŸÖÿ™ÿ±ÿßÿ®ÿ∑ÿ©ÿå ÿ£ŸÜÿ¥ÿ∑ÿ©ÿå ÿ™ŸÇŸäŸäŸÖÿßÿ™.",
        showLink: true
      },
      {
        keywords: ['ÿ™ÿπŸÑŸÖ ÿßŸÑŸÉÿ®ÿßÿ±', 'ŸÖÿ®ÿßÿØÿ¶'],
        response:
          "üë®‚Äçüè´ ÿ™ÿπŸÑŸÖ ÿßŸÑŸÉÿ®ÿßÿ± Ÿäÿπÿ™ŸÖÿØ ÿπŸÑŸâ ÿßŸÑÿÆÿ®ÿ±ÿ©ÿå ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ ÿßŸÑÿπŸÖŸÑŸäÿå ÿßŸÑŸÖÿ±ŸàŸÜÿ©ÿå Ÿàÿßÿ≠ÿ™ÿ±ÿßŸÖ ÿßŸÑŸÖÿ™ÿπŸÑŸÖ.",
        showLink: true
      },

      /* -------------------------------------------------------------
         üîµ ÿßŸÑÿ•ÿπÿØÿßÿØ ‚Äì Development
      --------------------------------------------------------------*/
      {
        keywords: ['ŸÖŸàÿßÿØ ÿ™ÿπŸÑŸäŸÖŸäÿ©', 'Ÿàÿ≥ÿßÿ¶ÿ∑', 'ÿØŸÑŸäŸÑ ÿßŸÑŸÖŸäÿ≥ÿ±'],
        response:
          "üéûÔ∏è ÿßŸÑŸÖŸàÿßÿØ ÿ™ÿ¥ŸÖŸÑ: ŸÜÿµŸàÿµÿå ŸÅŸäÿØŸäŸàŸáÿßÿ™ÿå ÿ£ŸÜÿ¥ÿ∑ÿ©ÿå ÿØŸÑŸäŸÑ ÿßŸÑŸÖŸäÿ≥ÿ±ÿå ÿØŸÑŸäŸÑ ÿßŸÑŸÖÿ™ÿπŸÑŸÖ.",
        showLink: true
      },
      {
        keywords: ['ÿ¨ŸàÿØÿ© ÿßŸÑŸÖÿ≠ÿ™ŸàŸâ', 'ÿßÿÆÿ™ÿ®ÿßÿ± LMS'],
        response:
          "üß™ Ÿäÿ¨ÿ® ÿßÿÆÿ™ÿ®ÿßÿ± ÿßŸÑÿ±Ÿàÿßÿ®ÿ∑ÿå ÿßŸÑÿ™ŸÅÿßÿπŸÑÿå ÿ™ŸàÿßŸÅŸÇ ÿßŸÑÿ£ÿ¨Ÿáÿ≤ÿ©ÿå Ÿàÿ™ÿ™ÿ®ÿπ ÿßŸÑÿ£ÿØÿßÿ° ŸÅŸä LMS.",
        showLink: true
      },

      /* -------------------------------------------------------------
         üîµ ÿßŸÑÿ™ŸÇÿØŸäŸÖ ‚Äì Implementation
      --------------------------------------------------------------*/
      {
        keywords: ['ÿØŸàÿ± ÿßŸÑŸÖŸäÿ≥ÿ±', 'ÿßŸÑÿ™ŸÅÿßÿπŸÑ'],
        response:
          "üë• ÿØŸàÿ± ÿßŸÑŸÖŸäÿ≥ÿ±: ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÜŸÇÿßÿ¥ÿå ÿßŸÑÿ±ÿØ ÿπŸÑŸâ ÿßŸÑÿ£ÿ≥ÿ¶ŸÑÿ©ÿå ÿØÿπŸÖ ÿßŸÑŸÖÿ™ÿπŸÑŸÖŸäŸÜ.",
        showLink: true
      },
      {
        keywords: ['ÿ¨ŸÑÿ≥ÿßÿ™ ŸÖÿ®ÿßÿ¥ÿ±ÿ©', 'ÿ™ÿπŸÑŸÖ ŸÖÿ™ÿ≤ÿßŸÖŸÜ'],
        response:
          "üü¶ ÿßŸÑÿ¨ŸÑÿ≥ÿßÿ™ ÿßŸÑŸÖÿ®ÿßÿ¥ÿ±ÿ© ÿ™ŸÜÿßÿ≥ÿ® ÿßŸÑÿ£ŸÜÿ¥ÿ∑ÿ© ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇŸäÿ© ŸàÿßŸÑŸÜŸÇÿßÿ¥ÿßÿ™.",
        showLink: true
      },

      /* -------------------------------------------------------------
         üîµ ÿßŸÑÿ™ŸÇŸäŸäŸÖ ‚Äì Evaluation
      --------------------------------------------------------------*/
      {
        keywords: ['ŸÖÿ±ÿßŸÇÿ®ÿ©', 'ÿ™ŸÇŸäŸäŸÖ', 'ŸÜÿ™ÿßÿ¶ÿ¨'],
        response:
          "üìä ÿßŸÑŸÖÿ±ÿßŸÇÿ®ÿ© ŸÖÿ™ÿßÿ®ÿπÿ© ŸÖÿ≥ÿ™ŸÖÿ±ÿ©ÿå ÿ£ŸÖÿß ÿßŸÑÿ™ŸÇŸäŸäŸÖ ŸÅŸáŸà ÿ™ÿ≠ŸÑŸäŸÑ ÿßŸÑŸÜÿ™ÿßÿ¶ÿ¨ ŸàÿßŸÑÿ£ÿ´ÿ±.",
        showLink: true
      },
      {
        keywords: ['ÿ£ÿØŸàÿßÿ™ ÿßŸÑÿ™ŸÇŸäŸäŸÖ', 'ÿßÿÆÿ™ÿ®ÿßÿ±ÿßÿ™', 'LMS'],
        response:
          "üß™ ÿ£ÿØŸàÿßÿ™ ÿßŸÑŸÇŸäÿßÿ≥ ÿ™ÿ¥ŸÖŸÑ: ÿßŸÑÿßÿÆÿ™ÿ®ÿßÿ±ÿßÿ™ÿå ÿßŸÑÿßÿ≥ÿ™ÿ®ŸäÿßŸÜÿßÿ™ÿå ÿ™ÿ≠ŸÑŸäŸÑÿßÿ™ LMS.",
        showLink: true
      }
    ]
  }
};

        const TRANSLATIONS = {
            ar: {
                chatTitle: "ŸÖÿ≥ÿßÿπÿØ ÿßŸÑÿ™ÿØÿ±Ÿäÿ® ÿßŸÑÿ∞ŸÉŸä üß†",
                statusText: "ŸÖÿ™ÿµŸÑ ‚Ä¢ Ÿäÿ™ÿπŸÑŸÖ ŸÖŸÜ ÿ£ÿ≥ÿ¶ŸÑÿ™ŸÉ",
                inputPlaceholder: "ÿßÿ∑ÿ±ÿ≠ ÿ≥ÿ§ÿßŸÑŸÉ...",
                welcomeMessage: "üëã ŸÖÿ±ÿ≠ÿ®Ÿãÿß! ÿ£ŸÜÿß ŸÖÿ≥ÿßÿπÿØŸÉ ÿßŸÑÿ∞ŸÉŸä ÿßŸÑÿ∞Ÿä Ÿäÿ™ÿπŸÑŸÖ ŸÖŸÜ ÿ£ÿ≥ÿ¶ŸÑÿ™ŸÉ Ÿàÿ•ÿ¨ÿßÿ®ÿßÿ™ŸÉ. ÿßÿ≥ÿ™ÿÆÿØŸÖ ÿ≤ÿ± ‚ûï ŸÑÿ•ÿ∂ÿßŸÅÿ© ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿ¨ÿØŸäÿØÿ©!",
                voiceLang: "ar-SA",
                linkText: "üîó ÿßŸÑŸàÿµŸàŸÑ ÿ•ŸÑŸâ ÿßŸÑÿØÿ±ÿ≥",
                defaultResponse: "ü§î ŸÑŸÖ ÿ£ÿ¨ÿØ ŸÖÿπŸÑŸàŸÖÿßÿ™ ŸÖÿ≠ÿØÿØÿ© ÿ≠ŸàŸÑ Ÿáÿ∞ÿß ÿßŸÑŸÖŸàÿ∂Ÿàÿπ. ŸáŸÑ ŸäŸÖŸÉŸÜŸÉ ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿ•ÿ¨ÿßÿ®ÿ© ÿ®ÿßŸÑÿ∂ÿ∫ÿ∑ ÿπŸÑŸâ ÿ≤ÿ± ‚ûï ŸÑŸäÿ™ÿπŸÑŸÖ ÿßŸÑÿ¥ÿßÿ™ ÿ®Ÿàÿ™ÿü",
                knowledgeAdded: "‚úÖ ÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑŸÖÿπŸÑŸàŸÖÿ© ÿ®ŸÜÿ¨ÿßÿ≠! ÿßŸÑÿ¢ŸÜ ŸäŸÖŸÉŸÜŸÜŸä ÿßŸÑÿ•ÿ¨ÿßÿ®ÿ© ÿπŸÜ Ÿáÿ∞ÿß ÿßŸÑŸÖŸàÿ∂Ÿàÿπ.",
                learnedFrom: "ÿ™ÿπŸÑŸÖÿ™ ŸÖŸÜ"
            },
            fr: {
                chatTitle: "Assistant Intelligent üß†",
                statusText: "En ligne ‚Ä¢ Apprend de vos questions",
                inputPlaceholder: "Posez votre question...",
                welcomeMessage: "üëã Bonjour! Je suis votre assistant intelligent qui apprend! Utilisez ‚ûï pour ajouter des informations.",
                voiceLang: "fr-FR",
                linkText: "üîó Acc√©der au cours",
                defaultResponse: "ü§î Je n'ai pas trouv√© d'informations. Voulez-vous ajouter la r√©ponse avec ‚ûï?",
                knowledgeAdded: "‚úÖ Information ajout√©e!",
                learnedFrom: "Appris de"
            },
            en: {
                chatTitle: "Smart Assistant üß†",
                statusText: "Online ‚Ä¢ Learning from you",
                inputPlaceholder: "Ask your question...",
                welcomeMessage: "üëã Hello! I'm your smart assistant that learns! Use ‚ûï to add new information.",
                voiceLang: "en-US",
                linkText: "üîó Access course",
                defaultResponse: "ü§î I don't have information on this. Would you like to add it with ‚ûï?",
                knowledgeAdded: "‚úÖ Information added!",
                learnedFrom: "Learned from"
            }
        };

        let currentLanguage = 'ar';
        let isRecording = false;
        let isSoundEnabled = false;
        let recognition = null;
        let synthesis = window.speechSynthesis;
        let isChatOpen = false;

        // LocalStorage ŸÑŸÑÿ™ÿπŸÑŸÖ
        const STORAGE_KEY = 'chatbot_learned_knowledge';

        function getLearnedKnowledge() {
            const stored = localStorage.getItem(STORAGE_KEY);
            return stored ? JSON.parse(stored) : { ar: [], fr: [], en: [] };
        }

        function saveLearnedKnowledge(lang, entry) {
            const learned = getLearnedKnowledge();
            learned[lang].push({
                ...entry,
                timestamp: new Date().toISOString(),
                learnedBy: 'user'
            });
            localStorage.setItem(STORAGE_KEY, JSON.stringify(learned));
            console.log('‚úÖ Knowledge saved:', entry);
        }

        document.addEventListener('DOMContentLoaded', function() {
            initializeSpeechRecognition();
            loadLearnedKnowledge();
            setTimeout(() => {
                if (!isChatOpen) {
                    document.getElementById('notificationBadge').style.display = 'flex';
                }
            }, 3000);
        });

        function loadLearnedKnowledge() {
            const learned = getLearnedKnowledge();
            let totalLearned = 0;
            for (let lang in learned) {
                totalLearned += learned[lang].length;
            }
            console.log(`üìö Loaded ${totalLearned} learned entries`);
        }

        document.getElementById('chatbotToggler').addEventListener('click', function() {
            document.body.classList.toggle('show-chatbot');
            isChatOpen = !isChatOpen;

            if (isChatOpen) {
                document.getElementById('notificationBadge').style.display = 'none';
                if (document.getElementById('chatMessages').children.length === 1) {
                    setTimeout(() => {
                        displayWelcomeMessage();
                    }, 300);
                }
                document.getElementById('userInput').focus();
            }
        });

        function displayWelcomeMessage() {
            const learned = getLearnedKnowledge();
            const learnedCount = learned[currentLanguage].length;

            let message = TRANSLATIONS[currentLanguage].welcomeMessage;
            if (learnedCount > 0) {
                message += ` ŸÑÿØŸäŸë ÿßŸÑÿ¢ŸÜ ${learnedCount} ŸÖÿπŸÑŸàŸÖÿ© ÿ•ÿ∂ÿßŸÅŸäÿ© ÿ™ÿπŸÑŸÖÿ™Ÿáÿß ŸÖŸÜŸÉŸÖ! üéâ`;
            }

            displayMessage(message, 'bot');

            const suggestions = KNOWLEDGE_BASE[currentLanguage].suggestions;
            const suggestionsHTML = suggestions.map(s => 
                `<button class="suggestion-btn" onclick="handleSuggestion('${s}')">${s}</button>`
            ).join('');

            const suggestionDiv = document.createElement('div');
            suggestionDiv.className = 'message bot';
            suggestionDiv.innerHTML = `
                <div class="message-avatar">ü§ñ</div>
                <div class="message-content">
                    <div>ÿßŸÇÿ™ÿ±ÿßÿ≠ÿßÿ™ ÿ≥ÿ±Ÿäÿπÿ©:</div>
                    <div class="quick-suggestions">${suggestionsHTML}</div>
                </div>
            `;

            const messagesContainer = document.getElementById('chatMessages');
            messagesContainer.insertBefore(suggestionDiv, document.getElementById('typingIndicator'));
        }

        function handleSuggestion(suggestion) {
            document.getElementById('userInput').value = suggestion;
            sendMessage();
        }

        function sendMessage() {
            const input = document.getElementById('userInput');
            const message = input.value.trim();

            if (message === '') return;

            displayMessage(message, 'user');
            input.value = '';

            showTypingIndicator();

            setTimeout(() => {
                const response = generateResponse(message);
                hideTypingIndicator();
                displayMessage(response.text, 'bot', response.showLink, response.isLearned);
                if (isSoundEnabled) {
                    speakResponse(response.text);
                }
            }, 800);
        }

        function generateResponse(question) {
            const lowerQuestion = question.toLowerCase();

            // ÿ£ŸàŸÑÿßŸã: ÿßŸÑÿ®ÿ≠ÿ´ ŸÅŸä ÿßŸÑŸÖÿπÿ±ŸÅÿ© ÿßŸÑŸÖÿ™ÿπŸÑŸÖÿ©
            const learned = getLearnedKnowledge();
            for (let entry of learned[currentLanguage]) {
                for (let keyword of entry.keywords) {
                    if (lowerQuestion.includes(keyword.toLowerCase())) {
                        return {
                            text: entry.response,
                            showLink: entry.showLink,
                            isLearned: true
                        };
                    }
                }
            }

            // ÿ´ÿßŸÜŸäÿßŸã: ÿßŸÑÿ®ÿ≠ÿ´ ŸÅŸä ŸÇÿßÿπÿØÿ© ÿßŸÑŸÖÿπÿßÿ±ŸÅ ÿßŸÑÿ£ÿµŸÑŸäÿ©
            const langData = KNOWLEDGE_BASE[currentLanguage];
            for (let section of langData.sections) {
                for (let keyword of section.keywords) {
                    if (lowerQuestion.includes(keyword)) {
                        return {
                            text: section.response,
                            showLink: section.showLink,
                            isLearned: false
                        };
                    }
                }
            }

            return {
                text: TRANSLATIONS[currentLanguage].defaultResponse,
                showLink: true,
                isLearned: false
            };
        }

        function displayMessage(message, sender, showLink = false, isLearned = false) {
            const messagesContainer = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}`;

            const now = new Date();
            const time = now.getHours().toString().padStart(2, '0') + ':' + 
                        now.getMinutes().toString().padStart(2, '0');

            const avatar = sender === 'bot' ? 'ü§ñ' : 'üë§';

            let linkHTML = '';
            if (showLink && sender === 'bot') {
                linkHTML = `<br><a href="${COURSE_CONFIG.courseUrl}" target="_blank" class="course-link">${TRANSLATIONS[currentLanguage].linkText}</a>`;
            }

            let learnedBadge = '';
            if (isLearned && sender === 'bot') {
                learnedBadge = `<span class="learned-badge">‚ú® ${TRANSLATIONS[currentLanguage].learnedFrom}</span>`;
            }

            messageDiv.innerHTML = `
                <div class="message-avatar">${avatar}</div>
                <div class="message-content">
                    ${learnedBadge}${message}${linkHTML}
                    <span class="message-time">${time}</span>
                </div>
            `;

            messagesContainer.insertBefore(messageDiv, document.getElementById('typingIndicator'));
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function showTypingIndicator() {
            document.getElementById('typingIndicator').style.display = 'block';
            document.getElementById('chatMessages').scrollTop = document.getElementById('chatMessages').scrollHeight;
        }

        function hideTypingIndicator() {
            document.getElementById('typingIndicator').style.display = 'none';
        }

        // ============================================
        // MODAL ŸÑÿ•ÿ∂ÿßŸÅÿ© ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿ¨ÿØŸäÿØÿ©
        // ============================================
        function openAddKnowledgeModal() {
            document.getElementById('addKnowledgeModal').classList.add('show');
            document.getElementById('newKeywords').focus();
        }

        function closeAddKnowledgeModal() {
            document.getElementById('addKnowledgeModal').classList.remove('show');
            document.getElementById('newKeywords').value = '';
            document.getElementById('newResponse').value = '';
            document.getElementById('showLinkCheckbox').checked = true;
        }

        function saveNewKnowledge(event) {
            event.preventDefault();

            const keywordsInput = document.getElementById('newKeywords').value;
            const response = document.getElementById('newResponse').value;
            const showLink = document.getElementById('showLinkCheckbox').checked;

            const keywords = keywordsInput.split(',').map(k => k.trim()).filter(k => k.length > 0);

            if (keywords.length === 0 || response.length === 0) {
                alert('ÿßŸÑÿ±ÿ¨ÿßÿ° ŸÖŸÑÿ° ÿ¨ŸÖŸäÿπ ÿßŸÑÿ≠ŸÇŸàŸÑ');
                return;
            }

            const newEntry = {
                keywords: keywords,
                response: response,
                showLink: showLink
            };

            saveLearnedKnowledge(currentLanguage, newEntry);

            closeAddKnowledgeModal();

            displayMessage(TRANSLATIONS[currentLanguage].knowledgeAdded, 'bot');

            // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿπÿØÿßÿØ
            const learned = getLearnedKnowledge();
            const count = learned[currentLanguage].length;
            document.getElementById('statusText').textContent = `ŸÖÿ™ÿµŸÑ ‚Ä¢ ${count} ŸÖÿπŸÑŸàŸÖÿßÿ™ ŸÖÿ™ÿπŸÑŸÖÿ©`;
        }

        // ============================================
        // SPEECH RECOGNITION & SYNTHESIS
        // ============================================
        function initializeSpeechRecognition() {
            if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                recognition = new SpeechRecognition();

                recognition.continuous = false;
                recognition.interimResults = false;
                recognition.lang = TRANSLATIONS[currentLanguage].voiceLang;

                recognition.onstart = function() {
                    isRecording = true;
                    document.getElementById('voiceBtn').classList.add('recording');
                };

                recognition.onresult = function(event) {
                    const transcript = event.results[0][0].transcript;
                    document.getElementById('userInput').value = transcript;
                    sendMessage();
                };

                recognition.onend = function() {
                    isRecording = false;
                    document.getElementById('voiceBtn').classList.remove('recording');
                };
            } else {
                document.getElementById('voiceBtn').style.display = 'none';
            }
        }

        function toggleVoiceRecognition() {
            if (!recognition) return;

            if (isRecording) {
                recognition.stop();
            } else {
                recognition.lang = TRANSLATIONS[currentLanguage].voiceLang;
                recognition.start();
            }
        }

        function toggleSound() {
            isSoundEnabled = !isSoundEnabled;
            const soundBtn = document.getElementById('soundBtn');

            if (isSoundEnabled) {
                soundBtn.innerHTML = 'üîä';
                soundBtn.title = 'ÿ•ŸäŸÇÿßŸÅ ÿßŸÑÿµŸàÿ™';
                soundBtn.classList.add('active');
            } else {
                soundBtn.innerHTML = 'üîá';
                soundBtn.title = 'ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿµŸàÿ™';
                soundBtn.classList.remove('active');
                if (synthesis) synthesis.cancel();
            }
        }

        function speakResponse(text) {
            if (!synthesis || !isSoundEnabled) return;

            const cleanText = text.replace(/[\u{1F300}-\u{1F9FF}]/gu, '')
                                  .replace(/[0-9]/g, '')
                                  .replace(/[()]/g, '')
                                  .replace(/‚úÖ|ü§î|‚ûï|‚ú®/g, '')
                                  .trim();

            if (!cleanText) return;

            synthesis.cancel();

            const utterance = new SpeechSynthesisUtterance(cleanText);

            if (currentLanguage === 'ar') {
                utterance.lang = 'ar-SA';
                utterance.rate = 0.85;
                utterance.pitch = 1.0;
            } else if (currentLanguage === 'fr') {
                utterance.lang = 'fr-FR';
                utterance.rate = 0.9;
                utterance.pitch = 1.0;
            } else {
                utterance.lang = 'en-US';
                utterance.rate = 0.9;
                utterance.pitch = 1.0;
            }

            let voices = synthesis.getVoices();

            if (voices.length === 0) {
                synthesis.addEventListener('voiceschanged', () => {
                    voices = synthesis.getVoices();
                    setVoiceAndSpeak(utterance, voices);
                }, { once: true });
                return;
            }

            setVoiceAndSpeak(utterance, voices);
        }

        function setVoiceAndSpeak(utterance, voices) {
            let selectedVoice = null;

            if (currentLanguage === 'ar') {
                const arabicVoiceNames = ['Microsoft Hoda', 'Google Arabic', 'ar-SA', 'ar-EG', 'Arabic'];

                for (let voiceName of arabicVoiceNames) {
                    selectedVoice = voices.find(voice => 
                        voice.name.includes(voiceName) || voice.lang.includes('ar')
                    );
                    if (selectedVoice) break;
                }
            } else if (currentLanguage === 'fr') {
                selectedVoice = voices.find(voice => 
                    voice.lang.startsWith('fr') && voice.lang.includes('FR')
                );
            } else {
                selectedVoice = voices.find(voice => 
                    voice.lang.startsWith('en') && voice.lang.includes('US')
                );
            }

            if (selectedVoice) {
                utterance.voice = selectedVoice;
            }

            synthesis.speak(utterance);
        }

        function switchLanguage(lang) {
            currentLanguage = lang;

            document.getElementById('chatTitle').textContent = TRANSLATIONS[lang].chatTitle;

            const learned = getLearnedKnowledge();
            const count = learned[lang].length;
            document.getElementById('statusText').textContent = count > 0 ? 
                `${TRANSLATIONS[lang].statusText.split('‚Ä¢')[0]}‚Ä¢ ${count} ŸÖÿπŸÑŸàŸÖÿßÿ™` : 
                TRANSLATIONS[lang].statusText;

            document.getElementById('userInput').placeholder = TRANSLATIONS[lang].inputPlaceholder;

            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.lang === lang) {
                    btn.classList.add('active');
                }
            });

            if (lang === 'ar') {
                document.documentElement.setAttribute('dir', 'rtl');
            } else {
                document.documentElement.setAttribute('dir', 'ltr');
            }

            if (recognition) {
                recognition.lang = TRANSLATIONS[lang].voiceLang;
            }
        }

        document.getElementById('userInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });
    </script>
</body>
</html>
